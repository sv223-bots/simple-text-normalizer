import re

# Словари для нормализации
HOMOGLYPHS_NO_NUMBERS = {

    'ᴀ': 'а', 'ʜ': 'н', 'x': 'х', 'ᴋ': 'к', 'ʙ': 'в',
    'ᴄ': 'с', 'ᴛ': 'т', 'ᴀ': 'а', 'ᴘ': 'р', 'ᴍ': 'м',
    'ᴇ': 'е', 'o': 'о', 'ʙ': 'в', 'д': 'д', 'и': 'и',
    'л': 'л', 'п': 'п', 'с': 'с', 'у': 'у', 'ц': 'ц',
    'ы': 'ы', 'ь': 'ь', 'я': 'я', "ᴏ": "о",

    "()": "о",
    # Основной латинский алфавит
    "a": "а", "b": "в", "c": "с", "d": "д", "e": "е", "f": "ф", 
    "g": "г", "h": "н", "i": "и", "j": "й", "k": "к", "l": "л",
    "m": "м", "n": "п", "o": "о", "p": "р", "q": "к", "r": "г",
    "s": "с", "t": "т", "u": "и", "v": "в", "w": "ш", "x": "х",
    "y": "у", "z": "з", "ё": "е", "_": " ", "ο": "о",
    
    # Заглавные латинские
    "A": "А", "B": "В", "C": "С", "D": "Д", "E": "Е", "F": "Ф",
    "G": "Г", "H": "Н", "I": "И", "J": "Й", "K": "К", "L": "Л",
    "M": "М", "N": "П", "O": "О", "P": "Р", "Q": "К", "R": "Г",
    "S": "С", "T": "Т", "U": "И", "V": "В", "W": "Ш", "X": "Х",
    "Y": "У", "Z": "З",
    
    # Греческий алфавит (похожие символы)
    "α": "а", "β": "в", "γ": "г", "δ": "д", "ε": "е", "ζ": "з",
    "η": "н", "θ": "ѳ", "ι": "и", "κ": "к", "λ": "л", "μ": "м",
    "ν": "и", "ξ": "кc", "ο": "о", "π": "п", "ρ": "р", "σ": "с",
    "τ": "т", "υ": "у", "φ": "ф", "χ": "х", "ψ": "пc", "ω": "ш",
    
    # Заглавные греческие
    "Α": "А", "Β": "В", "Γ": "Г", "Δ": "Д", "Ε": "Е", "Ζ": "З",
    "Η": "Н", "Θ": "Ѳ", "Ι": "И", "Κ": "К", "Λ": "Л", "Μ": "М",
    "Ν": "И", "Ξ": "Кc", "Ο": "О", "Π": "П", "Ρ": "Р", "Σ": "С",
    "Τ": "Т", "Υ": "У", "Φ": "Ф", "Χ": "Х", "Ψ": "Пc", "Ω": "Ш",
    
    # Диакритические знаки и акценты
    "á": "а", "à": "а", "â": "а", "ã": "а", "ā": "а",
    "é": "е", "è": "е", "ê": "е", "ë": "е", "ē": "е",
    "í": "и", "ì": "и", "î": "и", "ï": "и", "ī": "и",
    "ó": "о", "ò": "о", "ô": "о", "õ": "о", "ō": "о",
    "ú": "у", "ù": "у", "û": "у", "ü": "у", "ū": "у",
    "ý": "у", "ÿ": "у",
    
    # Заглавные с диакритиками
    "Á": "А", "À": "А", "Â": "А", "Ã": "А", "Ā": "А",
    "É": "Е", "È": "Е", "Ê": "Е", "Ë": "Е", "Ē": "Е",
    "Í": "И", "Ì": "И", "Î": "И", "Ï": "И", "Ī": "И",
    "Ó": "О", "Ò": "О", "Ô": "О", "Õ": "О", "Ō": "О",
    "Ú": "У", "Ù": "У", "Û": "У", "Ü": "У", "Ū": "У",
    "Ý": "У",
    
    # Церковнославянские и старославянские буквы
    "ѡ": "в", "Ѣ": "б", "Ѧ": "а", "Ѫ": "ю", "Ѩ": "я", "Ѭ": "ю",
    "Ѯ": "з", "Ѱ": "пс", "Ѳ": "ѳ", "Ѵ": "и",
    "ѣ": "е", "ѧ": "я", "ѫ": "ю", "ѩ": "я", "ѭ": "ю",
    "ѯ": "кс", "ѱ": "пс", "ѳ": "ѳ", "ѵ": "и",
    
    # Цифры и специальные символы 
    "@": "а", "#": "№", "$": "З", "&": "и", "*": "*",
    
    # Математические и технические символы
    "∂": "д", "∆": "Д", "∇": "V", "∑": "Е", "∏": "П",
    "π": "п", "Π": "П", "√": "V", "∞": "∞", "≈": "~",
    "≠": "=", "≤": "<", "≥": ">", "±": "+", "×": "х",
    
    # Дополнительные Unicode символы
    "ʀ": "Я", "ʀ": "я",  # маленькая заглавная R
    "ɢ": "Г", "ɢ": "г",  # маленькая заглавная G
    "ᴍ": "М", "ᴍ": "м",  # маленькая заглавная M
    "ɴ": "П", "ɴ": "п",  # маленькая заглавная N
    "ʜ": "Н", "ʜ": "н",  # маленькая заглавная H
    "ʟ": "Л", "ʟ": "л"  # маленькая заглавная L
}

HOMOGLYPHS_EXTENDED = {


    'ᴀ': 'а', 'ʜ': 'н', 'x': 'х', 'ᴋ': 'к', 'ʙ': 'в',
    'ᴄ': 'с', 'ᴛ': 'т', 'ᴀ': 'а', 'ᴘ': 'р', 'ᴍ': 'м',
    'ᴇ': 'е', 'o': 'о', 'ʙ': 'в', 'д': 'д', 'и': 'и',
    'л': 'л', 'п': 'п', 'с': 'с', 'у': 'у', 'ц': 'ц',
    'ы': 'ы', 'ь': 'ь', 'я': 'я', "ᴏ": "о",

    "()": "о",
    # Основной латинский алфавит
    "a": "а", "b": "в", "c": "с", "d": "д", "e": "е", "f": "ф", 
    "g": "г", "h": "н", "i": "и", "j": "й", "k": "к", "l": "л",
    "m": "м", "n": "п", "o": "о", "p": "р", "q": "к", "r": "г",
    "s": "с", "t": "т", "u": "и", "v": "в", "w": "ш", "x": "х",
    "y": "у", "z": "з", "ё": "е", "_": " ", "ο": "о",
    
    # Заглавные латинские
    "A": "А", "B": "В", "C": "С", "D": "Д", "E": "Е", "F": "Ф",
    "G": "Г", "H": "Н", "I": "И", "J": "Й", "K": "К", "L": "Л",
    "M": "М", "N": "П", "O": "О", "P": "Р", "Q": "К", "R": "Г",
    "S": "С", "T": "Т", "U": "И", "V": "В", "W": "Ш", "X": "Х",
    "Y": "У", "Z": "З",
    
    # Греческий алфавит (похожие символы)
    "α": "а", "β": "в", "γ": "г", "δ": "д", "ε": "е", "ζ": "з",
    "η": "н", "θ": "ѳ", "ι": "и", "κ": "к", "λ": "л", "μ": "м",
    "ν": "и", "ξ": "кc", "ο": "о", "π": "п", "ρ": "р", "σ": "с",
    "τ": "т", "υ": "у", "φ": "ф", "χ": "х", "ψ": "пc", "ω": "ш",
    
    # Заглавные греческие
    "Α": "А", "Β": "В", "Γ": "Г", "Δ": "Д", "Ε": "Е", "Ζ": "З",
    "Η": "Н", "Θ": "Ѳ", "Ι": "И", "Κ": "К", "Λ": "Л", "Μ": "М",
    "Ν": "И", "Ξ": "Кc", "Ο": "О", "Π": "П", "Ρ": "Р", "Σ": "С",
    "Τ": "Т", "Υ": "У", "Φ": "Ф", "Χ": "Х", "Ψ": "Пc", "Ω": "Ш",
    
    # Диакритические знаки и акценты
    "á": "а", "à": "а", "â": "а", "ã": "а", "ā": "а",
    "é": "е", "è": "е", "ê": "е", "ë": "е", "ē": "е",
    "í": "и", "ì": "и", "î": "и", "ï": "и", "ī": "и",
    "ó": "о", "ò": "о", "ô": "о", "õ": "о", "ō": "о",
    "ú": "у", "ù": "у", "û": "у", "ü": "у", "ū": "у",
    "ý": "у", "ÿ": "у",
    
    # Заглавные с диакритиками
    "Á": "А", "À": "А", "Â": "А", "Ã": "А", "Ā": "А",
    "É": "Е", "È": "Е", "Ê": "Е", "Ë": "Е", "Ē": "Е",
    "Í": "И", "Ì": "И", "Î": "И", "Ï": "И", "Ī": "И",
    "Ó": "О", "Ò": "О", "Ô": "О", "Õ": "О", "Ō": "О",
    "Ú": "У", "Ù": "У", "Û": "У", "Ü": "У", "Ū": "У",
    "Ý": "У",
    
    # Церковнославянские и старославянские буквы
    "ѡ": "о", "Ѣ": "е", "Ѧ": "я", "Ѫ": "ю", "Ѩ": "я", "Ѭ": "ю",
    "Ѯ": "кс", "Ѱ": "пс", "Ѳ": "ѳ", "Ѵ": "и",
    "ѣ": "е", "ѧ": "я", "ѫ": "ю", "ѩ": "я", "ѭ": "ю",
    "ѯ": "кс", "ѱ": "пс", "ѳ": "ѳ", "ѵ": "и",
    
    # Цифры и специальные символы
    "0": "О", "1": "І", "2": "Z", "3": "З", "4": "Ч", 
    "5": "Б", "6": "б", "7": "Г", "8": "В", "9": "д",
    "@": "а", "#": "№", "$": "З", "&": "и", "*": "*",
    
    # Математические и технические символы
    "∂": "д", "∆": "Д", "∇": "V", "∑": "Е", "∏": "П",
    "π": "п", "Π": "П", "√": "V", "∞": "∞", "≈": "~",
    "≠": "=", "≤": "<", "≥": ">", "±": "+", "×": "х",
    
    # Дополнительные Unicode символы
    "ʀ": "Я", "ʀ": "я",  # маленькая заглавная R
    "ɢ": "Г", "ɢ": "г",  # маленькая заглавная G
    "ᴍ": "М", "ᴍ": "м",  # маленькая заглавная M
    "ɴ": "П", "ɴ": "п",  # маленькая заглавная N
    "ʜ": "Н", "ʜ": "н",  # маленькая заглавная H
    "ʟ": "Л", "ʟ": "л"  # маленькая заглавная L
}

HOMOGLYPHS_EXTENDED_OTHER = {


    'ᴀ': 'а', 'ʜ': 'н', 'x': 'х', 'ᴋ': 'к', 'ʙ': 'в',
    'ᴄ': 'с', 'ᴛ': 'т', 'ᴀ': 'а', 'ᴘ': 'р', 'ᴍ': 'м',
    'ᴇ': 'е', 'o': 'о', 'ʙ': 'в', 'д': 'д', 'и': 'и',
    'л': 'л', 'п': 'п', 'с': 'с', 'у': 'у', 'ц': 'ц',
    'ы': 'ы', 'ь': 'ь', 'я': 'я', "ᴏ": "о", "ο": "о",
    "()": "о",
    # Основной латинский алфавит
    "a": "а", "b": "б", "c": "с", "d": "д", "e": "е", "f": "ф", 
    "g": "г", "h": "х", "i": "1", "j": "й", "k": "к", "l": "л",
    "m": "м", "n": "п", "o": "о", "p": "р", "q": "к", "r": "р",
    "s": "с", "t": "т", "u": "у", "v": "в", "w": "ш", "x": "х",
    "y": "у", "z": "з", "ё": "е", "_": " ",
    
    # Заглавные латинские
    "A": "А", "B": "В", "C": "С", "D": "Д", "E": "Е", "F": "Ф",
    "G": "Г", "H": "Н", "I": "1", "J": "Й", "K": "К", "L": "Л",
    "M": "М", "N": "П", "O": "О", "P": "Р", "Q": "К", "R": "Г",
    "S": "С", "T": "Т", "U": "У", "V": "В", "W": "Ш", "X": "Х",
    "Y": "У", "Z": "З",
    
    # Греческий алфавит (похожие символы)
    "α": "а", "β": "в", "γ": "г", "δ": "д", "ε": "е", "ζ": "з",
    "η": "н", "θ": "ѳ", "ι": "и", "κ": "к", "λ": "л", "μ": "м",
    "ν": "и", "ξ": "кc", "ο": "о", "π": "п", "ρ": "р", "σ": "с",
    "τ": "т", "υ": "у", "φ": "ф", "χ": "х", "ψ": "пc", "ω": "ш",
    
    # Заглавные греческие
    "Α": "А", "Β": "В", "Γ": "Г", "Δ": "Д", "Ε": "Е", "Ζ": "З",
    "Η": "Н", "Θ": "Ѳ", "Ι": "И", "Κ": "К", "Λ": "Л", "Μ": "М",
    "Ν": "И", "Ξ": "Кc", "Ο": "О", "Π": "П", "Ρ": "Р", "Σ": "С",
    "Τ": "Т", "Υ": "У", "Φ": "Ф", "Χ": "Х", "Ψ": "Пc", "Ω": "Ш",
    
    # Диакритические знаки и акценты
    "á": "а", "à": "а", "â": "а", "ã": "а", "ā": "а",
    "é": "е", "è": "е", "ê": "е", "ë": "е", "ē": "е",
    "í": "и", "ì": "и", "î": "и", "ï": "и", "ī": "и",
    "ó": "о", "ò": "о", "ô": "о", "õ": "о", "ō": "о",
    "ú": "у", "ù": "у", "û": "у", "ü": "у", "ū": "у",
    "ý": "у", "ÿ": "у",
    
    # Заглавные с диакритиками
    "Á": "А", "À": "А", "Â": "А", "Ã": "А", "Ā": "А",
    "É": "Е", "È": "Е", "Ê": "Е", "Ë": "Е", "Ē": "Е",
    "Í": "И", "Ì": "И", "Î": "И", "Ï": "И", "Ī": "И",
    "Ó": "О", "Ò": "О", "Ô": "О", "Õ": "О", "Ō": "О",
    "Ú": "У", "Ù": "У", "Û": "У", "Ü": "У", "Ū": "У",
    "Ý": "У",
    
    # Церковнославянские и старославянские буквы
    "ѡ": "о", "Ѣ": "е", "Ѧ": "я", "Ѫ": "ю", "Ѩ": "я", "Ѭ": "ю",
    "Ѯ": "кс", "Ѱ": "пс", "Ѳ": "ѳ", "Ѵ": "и",
    "ѣ": "е", "ѧ": "я", "ѫ": "ю", "ѩ": "я", "ѭ": "ю",
    "ѯ": "кс", "ѱ": "пс", "ѳ": "ѳ", "ѵ": "и",
    
    # Цифры и специальные символы
    "0": "О", "1": "І", "2": "Z", "3": "З", "4": "Ч", 
    "5": "Б", "6": "б", "7": "Г", "8": "В", "9": "д",
    "@": "а", "#": "№", "$": "З", "&": "и", "*": "*",
    
    # Математические и технические символы
    "∂": "д", "∆": "Д", "∇": "V", "∑": "Е", "∏": "П",
    "π": "п", "Π": "П", "√": "V", "∞": "∞", "≈": "~",
    "≠": "=", "≤": "<", "≥": ">", "±": "+", "×": "х",
    
    # Дополнительные Unicode символы
    "ʀ": "Я", "ʀ": "я",  # маленькая заглавная R
    "ɢ": "Г", "ɢ": "г",  # маленькая заглавная G
    "ᴍ": "М", "ᴍ": "м",  # маленькая заглавная M
    "ɴ": "П", "ɴ": "п",  # маленькая заглавная N
    "ʜ": "Н", "ʜ": "н",  # маленькая заглавная H
    "ʟ": "Л", "ʟ": "л",  # маленькая заглавная L
}

def normalize_text(text: str, homoglyphs_dict: dict) -> str:
    """
    Нормализация текста:
    - Замена символов по словарю гомоглифов
    - Приведение к нижнему регистру
    - Очистка от специальных символов
    - Удаление повторяющихся букв
    """



    # Замена символов по таблице гомоглифов 
    for original_char, replacement_char in homoglyphs_dict.items():
        text = text.replace(original_char, replacement_char)

    # Приведение к нижнему регистру
    text = text.lower()

    # Очистка текста от всего, кроме РУССКИХ букв, цифр и пробелов
    text = re.sub(r'[^а-яёa-z0-9\s\t\n]', '', text)

    # Удаление повторяющихся символов (кроме цифр)
    normalized_chars = []
    previous_char = None

    for char in text:
        if char in (' ', '\t', '\n'):
            normalized_chars.append(char)
            previous_char = None
            continue

        if not char.isdigit() and char == previous_char:
            continue

        normalized_chars.append(char)
        previous_char = char

    return ''.join(normalized_chars)


def main():
    """Главная функция: ввод текста и вывод 3-х нормализованных версий"""
    input_text = input("Введите текст для нормализации: ")

    normalized_no_numbers = normalize_text(input_text, HOMOGLYPHS_NO_NUMBERS)
    normalized_extended = normalize_text(input_text, HOMOGLYPHS_EXTENDED)
    normalized_extended_other = normalize_text(input_text, HOMOGLYPHS_EXTENDED_OTHER)

    print("\n--- Вариант 1: HOMOGLYPHS_NO_NUMBERS ---")
    print(normalized_no_numbers)

    print("\n--- Вариант 2: HOMOGLYPHS_EXTENDED ---")
    print(normalized_extended)

    print("\n--- Вариант 3: HOMOGLYPHS_EXTENDED_OTHER ---")
    print(normalized_extended_other)


if __name__ == "__main__":
    main()
